package ar.edu.ungs.prog2.ticketek;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.LinkedHashMap;
import java.util.Map;

public class Funcion {

	LocalDate fecha;
	Sede sede;
	LinkedHashMap<String,Integer> entradasVendidas = new LinkedHashMap<>();
	DateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd/MM/yy" );
	double precioBase;
//	ArrayList<Integer> asientosDisponibles;

	Funcion(String fecha,Sede sede,double precioBase) {

		this.fecha = LocalDate.parse(fecha, formatter);
		this.sede = sede;
		this.precioBase = precioBase;
//		this.asientosDisponibles = new ArrayList<>(sede.capacidadMaxima);

		if(sede.getClass().getSimpleName().equals("Estadio")){

			this.entradasVendidas.put("Campo", 0);
		}
		else {			
			this.entradasVendidas.put("VIP", 0);
			this.entradasVendidas.put("Comun", 0);
			this.entradasVendidas.put("Baja", 0);
			this.entradasVendidas.put("Alta", 0);
		}
	}


	@Override
	public String toString() {

		StringBuilder info = new StringBuilder(" - " +"(" + fecha.format(formatter) + ") " + sede.nombre + " - ");

		//Si la sede es en un estadio devuelve fecha, nombre de sede, entradas vendidas y capacidad estadio.
		if ( sede.getClass().getSimpleName().equals("Estadio")) {

			info.append(entradasVendidas.get("Campo")).append(sede.capacidadMaxima);
			return info.toString();
		}
		//Si la sede es teatro o miniEstadio devuelve fecha, nombre de sede, sector, cantidad de entradas
		//vendidas por sector y capacidad del sector.
		else {

			for (Map.Entry<String, Integer> entrada : entradasVendidas.entrySet()) {

				String nombreSector = entrada.getKey();
				Integer cantidadVendida = entrada.getValue();
				int capacidad = sede.capacidadSector(nombreSector);
				info.append(nombreSector);
				info.append(": ");
				info.append(cantidadVendida);
				info.append("/");
				info.append(capacidad);
				if (!nombreSector.equals("Alta"))
					info.append(" | ");
			}
		}
		return info.toString();  
	}

	boolean esIgual(String fecha) {

		return this.fecha.equals(LocalDate.parse(fecha, formatter));
	}


	public void agregarEntradaVendida(String nombreSector) {
		
		
		
		
	}


	
}








